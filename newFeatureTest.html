
<!DOCTYPE html>
<html>
<head>
	<title>Markdown Editor</title>
	<style>
		/* Add CSS styles for the SVG timeline */
		.timeline {
			display: block;
			margin: 20px 0;
			position: relative;
			height: 100px;
			width: 100%;
			border-bottom: 1px solid black;
		}
		.timeline .waymark {
			position: absolute;
			bottom: 0;
			width: 8px;
			height: 8px;
			border-radius: 50%;
			background-color: black;
			margin-left: -4px;
		}
		.timeline .waymark-label {
			position: absolute;
			top: -20px;
			text-align: center;
			width: 100%;
		}
		.timeline .waymark-label a {
			color: blue;
			text-decoration: underline;
		}
	</style>
</head>
<body>
	<!-- Add a textarea for the user to input markdown -->
	<textarea id="markdown-input"></textarea>
	<!-- Add a button to generate the SVG timeline -->
	<button id="generate-timeline-btn">Generate SVG</button>
	<!-- Add a container for the generated SVG timeline -->
	<div id="timeline-container"></div>

	<script>
		// Add event listener to the "Generate SVG" button
		document.getElementById("generate-timeline-btn").addEventListener("click", function() {
			// Get the markdown input from the textarea
			var markdownInput = document.getElementById("markdown-input").value;
			// Parse the markdown input to generate the SVG timeline
			var svgTimeline = parseMarkdownToSvgTimeline(markdownInput);
			// Display the SVG timeline in the container
			document.getElementById("timeline-container").innerHTML = svgTimeline;
		});

		// Function to parse markdown input and generate SVG timeline
		function parseMarkdownToSvgTimeline(markdownInput) {
			// Split the markdown input into lines
			var lines = markdownInput.split("\n");
			// Initialize variables for parsing the markdown input
			var currentList = null;
			var currentTimeline = null;
			var timelines = [];
			// Loop through each line of the markdown input
			for (var i = 0; i < lines.length; i++) {
				var line = lines[i];
				// Check if the line starts with "@Line:"
				if (line.startsWith("@Line:")) {
					// If it does, create a new list and timeline
					currentList = [];
					currentTimeline = {
						name: line.substring(6),
						items: currentList
					};
					timelines.push(currentTimeline);
				} else if (line.trim() === "end") {
					// If the line is "end", end the current list
					currentList = null;
					currentTimeline = null;
				} else if (currentList !== null) {
					// If the current list is not null, add the line as a list item
					currentList.push(line);
				}
			}
			// Generate the SVG timeline for each timeline
			var svgTimelines = "";
			for (var i = 0; i < timelines.length; i++) {
				var timeline = timelines[i];
				var svgTimeline = generateSvgTimeline(timeline.name, timeline.items, i);
				svgTimelines += svgTimeline;
			}
			return svgTimelines;
		}

		// Function to generate SVG timeline from list items
		function generateSvgTimeline(name, items, index) {
			// Calculate the width of each waymark
			var waymarkWidth = 100 / items.length;
			// Initialize variables for generating the SVG timeline
			var svgTimeline = '<svg class="timeline" viewBox="0 0 100 100">';
			// Loop through each item in the list
			for (var i = 0; i < items.length; i++) {
				var item = items[i];
				// Check if the item is a sublist item
				var isSublistItem = item.startsWith("  ");
				// Calculate the position of the waymark
				var waymarkPosition = (i * waymarkWidth) + (waymarkWidth / 2);
				// Calculate the position of the waymark label
				var waymarkLabelPosition = waymarkPosition - (waymarkWidth / 2);
				// Generate the SVG for the waymark
				var svgWaymark = '<div class="waymark" style="left: ' + waymarkPosition + '%;"></div>';
				// Generate the SVG for the waymark label
				var svgWaymarkLabel = '<div class="waymark-label" style="left: ' + waymarkLabelPosition + '%;">';
				// Check if the item is a link
				if (item.match(/\[(.*?)\]\((.*?)\)/)) {
					// If it is, generate the SVG for the link
					var linkText = item.match(/\[(.*?)\]/)[1];
					var linkUrl = item.match(/\((.*?)\)/)[1];
					svgWaymarkLabel += '<a href="' + linkUrl + '">' + linkText + '</a>';
				} else if (item.match(/\[\[(.*?)\]\]/)) {
					// If it is a wikilink, generate the SVG for the wikilink
					var linkText = item.match(/\[\[(.*?)\]\]/)[1];
					var linkUrl = "#" + linkText.replace(/\s+/g, "-").toLowerCase();
					svgWaymarkLabel += '<a href="' + linkUrl + '">' + linkText + '</a>';
				} else {
					// If it is not a link, generate the SVG for the item text
					svgWaymarkLabel += item;
				}
				svgWaymarkLabel += '</div>';
				// Add the SVG for the waymark and waymark label to the SVG timeline
				if (isSublistItem) {
					svgTimeline += svgWaymarkLabel;
				} else {
					svgTimeline += svgWaymark + svgWaymarkLabel;
				}
			}
			// Add the SVG for the timeline name to the SVG timeline
			svgTimeline += '<text x="0" y="15" font-size="12">' + name + '</text>';
			// Add the SVG for the timeline index to the SVG timeline
			svgTimeline += '<text x="0" y="30" font-size="12">Timeline ' + (index + 1) + '</text>';
			// Close the SVG timeline
			svgTimeline += '</svg>';
			return svgTimeline;
		}
	</script>
</body>
</html>
